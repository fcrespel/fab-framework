<div class="record-modellist record-model-<?php echo $this->modelName; ?>">
    <table class="record-list">
        <thead>
            <tr>
                <?php foreach ($this->fieldNames as $name): ?>
                    <th class="record-header sort-<?php echo $this->sortDirection ?><?php if (!strcasecmp($name, $this->sortField)) echo ' sorted' ?>"><a href="<?php echo $this->url(array($this->options['sortParamName'] => !strcasecmp($name, $this->sortField) && $this->sortDirection == 'asc' ? $name . '.d' : $name)) ?>">
                        <?php echo $this->escape($this->options['fieldLabels'][$name]); ?>
                    </a></th>
                <?php endforeach; ?>
                <?php if (count($this->options['singleRecordActions']) > 0): ?>
                <th>Actions</th>
                <?php endif; ?>
            </tr>
        </thead>
        <tbody>
            <?php $rowStyle = 1; ?>
            <?php foreach ($this->paginator as $record): ?>
            <tr class="<?php echo ($rowStyle ^= 1) ? 'odd' : 'even' ?>">
                <?php foreach ($this->fieldNames as $name): ?>
                    <td class="record-field record-field-<?php echo $name; ?>"><?php echo $this->context->getDecorator($name, $record->$name)->render($name, $record->$name); ?></td>
                <?php endforeach; ?>
                <?php if (count($this->options['singleRecordActions']) > 0): ?>
                <td class="record-single-actions">
                    <?php foreach ($this->options['singleRecordActions'] as $name => $urlOptions): ?>
                        <?php if ($this->context->isAllowed($record, $urlOptions['action'])) : ?>
                            <a class="record-action record-action-<?php echo $urlOptions['action']; ?>" href="<?php echo $this->url(array_merge($urlOptions, array('id' => $record->identifier()))); ?>" title="<?php echo $name; ?>"><?php echo $name; ?></a>
                        <?php endif; ?>
                    <?php endforeach; ?>
                </td>
                <?php endif; ?>
            </tr>
            <?php endforeach; ?>
        </tbody>
    </table>

    <?php if (count($this->options['globalRecordActions']) > 0) : ?>
    <ul class="record-global-actions">
        <?php foreach ($this->options['globalRecordActions'] as $name => $urlOptions) : ?>
            <?php if ($this->context->isAllowed(null, $urlOptions['action'])): ?>
                <li><a class="record-action record-action-<?php echo $urlOptions['action']; ?>" href="<?php echo $this->url($urlOptions); ?>" title="<?php echo $name; ?>"><?php echo $name; ?></a></li>
            <?php endif; ?>
        <?php endforeach; ?>
    </ul>
    <?php endif; ?>

<?php
$paginationControl = $this->paginationControl(
    $this->paginator, $this->options['paginationStyle'], $this->options['paginationScript']
);
echo $paginationControl;
?>
</div>